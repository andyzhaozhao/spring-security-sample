package cn.com.taiji.firth.web;import cn.com.taiji.firth.config.SaltProperties;import cn.com.taiji.firth.dto.RoleDTO;import cn.com.taiji.firth.repository.RoleMenuRepository;import cn.com.taiji.firth.service.MenuService;import cn.com.taiji.firth.service.RoleService;import cn.com.taiji.firth.service.UserService;import com.fasterxml.jackson.databind.ObjectMapper;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestParam;import java.util.List;/** * 类名称：RoleController * 类描述： * 创建人：wanghw * 创建时间：2018年2月5日 下午7:30:49 */@Controller@RequestMapping("/sys")public class RoleController {    private static final Logger log = LoggerFactory.getLogger(RoleController.class);    @Autowired    private RoleService roleService;    @Autowired    private UserService userService;    @Autowired    private MenuService menuService;    @Autowired    private ObjectMapper objectMapper;    @Autowired    private RoleMenuRepository roleMenuRepository;    @Autowired    private SaltProperties saltProperties;    /**     * @param model     * @return String     * @throws @author wanghw     * @Description: 角色列表跳转页面     * @date 2017年5月9日     */    @GetMapping("/role-list")    public String roleList(Model model) {        return "sys/role-list";    }    /**     * @param model     * @return String     * @throws     * @Description: 跳转至角色基础信息保存页面     * @author wanghw     * @date 2018年2月5日     */    @GetMapping("/role-add")    public String roleAdd(Model model) {        String salt = saltProperties.getSalt();        RoleDTO dto = new RoleDTO();        dto.generateToken(salt);        model.addAttribute("roleDto", dto);        return "sys/role-edit";    }    /**     * @param model     * @param id     * @return String     * @throws @author wanghw     * @Description: 编辑用户信息     * @date 2017年5月9日     */    @GetMapping("/role-edit")    public String userEdit(Model model, @RequestParam("id") String id) {        String salt = saltProperties.getSalt();        RoleDTO dto = roleService.findById(id, salt);        model.addAttribute("roleDto", dto);        return "sys/role-edit";    }    /**     * @param model     * @param roleId     * @return String     * @throws     * @Description: 跳转分配机构用户组合页面     * @author wanghw     * @date 2018年2月5日     */    @GetMapping("/role-dept-user-page")    public String editRoleUser(Model model, @RequestParam("roleId") String roleId) {        model.addAttribute("roleId", roleId);        return "sys/role-dept-user-page";    }    /**     * @param model     * @param roleId     * @return String     * @throws     * @Description: 机构组织用户页面     * @author wanghw     * @date 2018年2月5日     */    @GetMapping(value = "/role-dept-user")    public String deptUserList1(Model model, @RequestParam("roleId") String roleId) {        List<String> userIds = userService.findUserIdsByRoleId(roleId);        model.addAttribute("selectedUserIds", userIds);        model.addAttribute("roleId", roleId);        return "sys/role-dept-user";    }    /**     * @param model     * @param roleId     * @return String     * @throws     * @Description: 加载角色菜单     * @author wanghw     * @date 2018年2月5日     */    @GetMapping("/role-menu")    public String roleMenu(Model model, @RequestParam("roleId") String roleId) {        model.addAttribute("roleId", roleId);        return "sys/menu-check";    }}